<div class="post-detail-container">
  <div *ngIf="loading" class="loading">Chargement...</div>
  
  <div *ngIf="!loading && post" class="post-detail">
    <h1>{{ post.title }}</h1>
    <div class="post-meta">
      <span>Publié le {{ post.createdAt | date:'dd/MM/yyyy à HH:mm' }}</span>
      <span>Par utilisateur {{ post.usersId }}</span>
    </div>
    <div class="post-content">
      {{ post.content }}
    </div>
    
    <section class="comments-section">
      <h2>Commentaires ({{ comments.length }})</h2>
      
      <div *ngIf="isLoggedIn" class="comment-form">
        <h3>Ajouter un commentaire</h3>
        <textarea 
          [(ngModel)]="newComment" 
          placeholder="Votre commentaire..."
          rows="4"
        ></textarea>
        <button 
          (click)="submitComment()" 
          [disabled]="!newComment.trim()"
          class="submit-btn"
        >
          Envoyer
        </button>
        <div *ngIf="error" class="error">{{ error }}</div>
      </div>
      
      <div *ngIf="!isLoggedIn" class="login-prompt">
        <p>Vous devez être connecté pour commenter.</p>
        <a routerLink="/login">Se connecter</a>
      </div>
      
      <div class="comments-list">
        <div *ngFor="let comment of comments" class="comment">
          <div class="comment-header">
            <strong>Utilisateur {{ comment.user.id }}</strong>
            <span class="comment-date">{{ comment.createdAt | date:'dd/MM/yyyy à HH:mm' }}</span>
          </div>
          <p class="comment-content">{{ comment.content }}</p>
        </div>
        
        <div *ngIf="comments.length === 0" class="no-comments">
          Aucun commentaire pour le moment.
        </div>
      </div>
    </section>
  </div>
</div>